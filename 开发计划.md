# MoeGui 桌面精灵开发计划

## 项目概述

使用 Electron + PixiJS + Live2D 开发一个桌面精灵助手，可以通过 AI 智能整理桌面文件。

## 技术栈

| 层级 | 技术 |
|------|------|
| 框架 | Electron |
| 渲染 | PixiJS + pixi-live2d-display |
| 文件监控 | Chokidar |
| AI | OpenAI API / Gemini API |
| 打包 | electron-builder |

---

## 第一阶段：基础框架搭建

**目标**：让桌面出现一个透明的 Electron 窗口

### 任务清单
- [ ] 初始化项目结构 (`package.json`、目录组织)
- [ ] 配置 Electron 主进程，创建透明无边框窗口
- [ ] 实现系统托盘（Tray）+ 右键菜单退出
- [ ] 配置窗口置顶、跳过任务栏

### 交付物
桌面出现透明窗口，托盘可控制退出

---

## 第二阶段：Live2D 精灵显示

**目标**：在透明窗口中显示可动的 Live2D 模型

### 任务清单
- [ ] 集成 PixiJS 渲染引擎
- [ ] 引入 `pixi-live2d-display` 插件
- [ ] 加载 Live2D 模型并显示
- [ ] 实现基础 Idle 动画循环
- [ ] 鼠标视线追踪

### 交付物
桌面精灵显示并有基础动画

---

## 第三阶段：交互与鼠标穿透

**目标**：精灵不挡路，可拖拽移动

### 任务清单
- [ ] 实现 `setIgnoreMouseEvents` 智能穿透
- [ ] 点击精灵区域时响应，透明区域穿透
- [ ] 拖拽精灵移动位置
- [ ] 点击精灵触发特定动画（招手、卖萌等）

### 交付物
精灵可交互、可拖动、不影响正常桌面操作

---

## 第四阶段：文件拖拽与感知

**目标**：精灵能接收拖入的文件

### 任务清单
- [ ] 实现文件拖放监听（drag & drop）
- [ ] 拖入文件时触发"吃东西"动画
- [ ] 读取桌面文件列表
- [ ] 集成 Chokidar 监控桌面变化

### 交付物
文件可拖入精灵，精灵有反馈动画

---

## 第五阶段：AI 智能分类

**目标**：接入 AI 实现文件智能整理

### 任务清单
- [ ] 封装 AI API 调用模块（OpenAI/Gemini）
- [ ] 设计文件分类 Prompt
- [ ] 解析 AI 返回的分类建议 JSON
- [ ] 实现 `fs.move` 文件整理逻辑
- [ ] 整理完成后精灵播放庆祝动画

### 交付物
拖入文件后 AI 自动分类整理

---

## 第六阶段：对话交互

**目标**：可与精灵自然语言对话

### 任务清单
- [ ] 点击精灵弹出输入框（Command Palette）
- [ ] 自然语言输入发送给 AI
- [ ] 执行 AI 返回的动作指令
- [ ] 精灵语音反馈（可选 TTS）

### 交付物
完整的对话式桌面助手

---

## 第七阶段：打磨与发布

**目标**：完善细节，打包发布

### 任务清单
- [ ] 开机自启动配置
- [ ] 设置面板（更换模型、调整大小等）
- [ ] Electron 打包 (electron-builder)
- [ ] 安装包生成

### 交付物
可分发的安装包

---

## 项目目录结构（规划）

```
MoeGui/
├── package.json
├── electron.vite.config.js
├── src/
│   ├── main/              # Electron 主进程
│   │   ├── index.js
│   │   └── tray.js
│   ├── preload/           # 预加载脚本
│   │   └── index.js
│   └── renderer/          # 渲染进程
│       ├── index.html
│       ├── main.js
│       ├── style.css
│       └── live2d/        # Live2D 相关
├── resources/             # 资源文件
│   ├── icon.png           # 托盘图标
│   └── models/            # Live2D 模型
└── dist/                  # 构建输出
```

---

## 开发进度追踪

| 阶段 | 状态 | 开始日期 | 完成日期 |
|------|------|----------|----------|
| 第一阶段 | 待开始 | - | - |
| 第二阶段 | 待开始 | - | - |
| 第三阶段 | 待开始 | - | - |
| 第四阶段 | 待开始 | - | - |
| 第五阶段 | 待开始 | - | - |
| 第六阶段 | 待开始 | - | - |
| 第七阶段 | 待开始 | - | - |
