/* ========================================
   酷炫入场动画 - 缩地成寸效果
   ======================================== */

/* 动画容器 */
#entrance-animation-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
  overflow: hidden;
}

/* 隐藏动画容器 */
#entrance-animation-container.hidden {
  display: none;
}

/* ========================================
   第一阶段：召唤降临动画
   ======================================== */

/* 魔法阵背景 */
.magic-circle {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 400px;
  height: 400px;
  border: 3px solid rgba(138, 43, 226, 0.6);
  border-radius: 50%;
  animation: magicCircleAppear 1s ease-out forwards;
  filter: drop-shadow(0 0 20px rgba(138, 43, 226, 0.8));
}

@keyframes magicCircleAppear {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.3) rotate(0deg);
  }
  60% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.2) rotate(180deg);
  }
  100% {
    opacity: 0.8;
    transform: translate(-50%, -50%) scale(1) rotate(360deg);
  }
}

/* 内圈魔法阵 */
.magic-circle::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80%;
  height: 80%;
  border: 2px solid rgba(255, 105, 180, 0.5);
  border-radius: 50%;
  animation: innerCircleRotate 2s linear infinite;
}

@keyframes innerCircleRotate {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  100% {
    transform: translate(-50%, -50%) rotate(-360deg);
  }
}

/* 外圈光环 */
.magic-circle::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 120%;
  height: 120%;
  border: 1px dashed rgba(138, 43, 226, 0.3);
  border-radius: 50%;
  animation: outerCircleRotate 3s linear infinite;
}

@keyframes outerCircleRotate {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* 精灵容器淡入动画 */
.sprite-summon {
  animation: spriteSummon 1s ease-out forwards;
}

@keyframes spriteSummon {
  0% {
    opacity: 0;
    transform: scale(0.3);
    filter: brightness(2) blur(10px);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.2);
    filter: brightness(1.5) blur(5px);
  }
  100% {
    opacity: 1;
    transform: scale(1);
    filter: brightness(1) blur(0px);
  }
}

/* ========================================
   第二阶段：能量蓄积动画
   ======================================== */

/* 能量粒子 */
.energy-particle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: radial-gradient(circle, rgba(138, 43, 226, 1) 0%, rgba(138, 43, 226, 0) 70%);
  border-radius: 50%;
  pointer-events: none;
  animation: particleOrbit 2s linear infinite;
  filter: drop-shadow(0 0 4px rgba(138, 43, 226, 0.8));
}

@keyframes particleOrbit {
  0% {
    transform: rotate(0deg) translateX(150px) rotate(0deg);
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  100% {
    transform: rotate(360deg) translateX(150px) rotate(-360deg);
    opacity: 0;
  }
}

/* 悬浮动画 */
.sprite-hover {
  animation: spriteHover 0.5s ease-in-out forwards;
}

@keyframes spriteHover {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

/* 光影闪烁 */
.glow-pulse {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(138, 43, 226, 0.3) 0%, transparent 70%);
  animation: glowPulse 1s ease-in-out infinite;
}

@keyframes glowPulse {
  0%, 100% {
    opacity: 0.5;
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.2);
  }
}

/* ========================================
   第三阶段：缩地成寸动画
   ======================================== */

/* 空间扭曲效果 */
.sprite-warp {
  animation: spriteWarp 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

@keyframes spriteWarp {
  0% {
    transform: scale(1) scaleX(1);
    opacity: 1;
  }
  30% {
    transform: scale(0.8) scaleX(1.3);
    opacity: 0.9;
  }
  60% {
    transform: scale(0.3) scaleX(2);
    opacity: 0.6;
  }
  100% {
    transform: scale(0.1) scaleX(3);
    opacity: 0;
  }
}

/* 残影效果 */
.afterimage {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.5;
  pointer-events: none;
  animation: afterimageFade 0.5s ease-out forwards;
}

@keyframes afterimageFade {
  0% {
    opacity: 0.7;
    filter: blur(0px);
  }
  100% {
    opacity: 0;
    filter: blur(20px);
    transform: scale(1.5);
  }
}

/* 光速轨迹 */
.warp-trail {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 4px;
  height: 200px;
  background: linear-gradient(to bottom,
    rgba(138, 43, 226, 0) 0%,
    rgba(138, 43, 226, 1) 50%,
    rgba(138, 43, 226, 0) 100%
  );
  filter: blur(2px);
  animation: warpTrailMove 0.3s ease-out forwards;
}

@keyframes warpTrailMove {
  0% {
    transform: translate(-50%, -50%) rotate(45deg) scaleY(0);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) rotate(135deg) scaleY(3);
    opacity: 0;
  }
}

/* ========================================
   第五阶段：降临完成动画
   ======================================== */

/* 展开动画 */
.sprite-expand {
  animation: spriteExpand 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes spriteExpand {
  0% {
    transform: scale(0.1) scaleX(3) rotate(180deg);
    opacity: 0;
    filter: blur(10px);
  }
  60% {
    transform: scale(1.15) scaleX(1) rotate(0deg);
    opacity: 1;
    filter: blur(2px);
  }
  100% {
    transform: scale(1) scaleX(1) rotate(0deg);
    opacity: 1;
    filter: blur(0px);
  }
}

/* 冲击波扩散 */
.shockwave {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100px;
  height: 100px;
  border: 3px solid rgba(138, 43, 226, 0.8);
  border-radius: 50%;
  animation: shockwaveExpand 0.6s ease-out forwards;
}

@keyframes shockwaveExpand {
  0% {
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 1;
    border-width: 3px;
  }
  100% {
    transform: translate(-50%, -50%) scale(3);
    opacity: 0;
    border-width: 0px;
  }
}

/* 空间涟漪 */
.ripple {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 50px;
  height: 50px;
  border: 2px solid rgba(255, 105, 180, 0.6);
  border-radius: 50%;
  animation: rippleExpand 1s ease-out forwards;
}

@keyframes rippleExpand {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(4);
    opacity: 0;
  }
}

/* 多层涟漪效果 */
.ripple:nth-child(2) {
  animation-delay: 0.15s;
}

.ripple:nth-child(3) {
  animation-delay: 0.3s;
}

/* ========================================
   辅助动画
   ======================================== */

/* 星星闪烁 */
.star {
  position: absolute;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  animation: starTwinkle 1s ease-in-out infinite;
  filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.8));
}

@keyframes starTwinkle {
  0%, 100% {
    opacity: 0.3;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.5);
  }
}

/* 光芒射线 */
.light-ray {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 2px;
  height: 100px;
  background: linear-gradient(to bottom,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.8) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  transform-origin: center top;
  animation: lightRayRotate 2s linear infinite;
  filter: blur(1px);
}

@keyframes lightRayRotate {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
    opacity: 0.5;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg);
    opacity: 0.5;
  }
}
